# Components and Actions

Today, we are going to continue iterating on our contact-manager application that we started last week. We are going to start by moving some of the code into a component and creating an action on that component that is passed to the controller.

Let's begin by starting our server.

    $ ember s

First, we'll create a component with an action for that sortBy queryParam that we set up last time.

    $ ember g component update-query

Now, open `app/templates/contacts.hbs` and add our new component. Components, like HTML elements come in both inline and block varieties. Let's use the inline version in this case.

    {{update-query}}

Components in Ember are composed of two files. The JavaScript portion of the component lives in `app/components/update-query.js` and the corresponding markup lives in `app/templates/components/update-query.hbs`. Let's open the template and make it look like we want.

You'll notice upon opening `update-query.hbs` that we have a `{{yield}}`. That yield will render anything that is placed between block level component tags. Since we are using this component as in inline component we can delete that and replace it with:

    <button>Sort by First Name</button>

If you go to your browser you will see that we now have a button that says 'Sort By First Name'. But, of course, clicking that button doesn't do anything. To solve that, we'll need to add an action. Since the queryParams need to be updated in the controller, that is where our action will live. At the bottom of `app/controllers/contacts.js` let's add:

    actions: {
      sortByFirstName(){
        this.set('sortBy', 'firstName');
      }
    }

Now, we need to give our component access to that action. We do this by passing that function to the component and allowing it to be called from the component.

Back in `app/templates/contacts.hbs` add the following:

    {{update-query updateSort=(action 'sortByFirstName')}}

Now, in `app/templates/components/update-query.js` add the action here that will call the controllers action:

    actions: {
      sendUpdate(){
        this.get('updateSort')();
      }
    }

Finally, we need to call that local action in the component's template. In `app/templates/components/updateSort.hbs` add:

    <button {{action 'sendUpdate'}}>Sort By First Name</button>

Now, your button will update your queryParams to sort by the firstName. There are a lot of things happening here, so let's walk through them. As you can probably tell, the action in the controller is what is actually updating our sortBy property. In the contacts template, when we call the component we are  making that action available to our component by this line: `updateSort=(action 'sortByFirstName')`. We are saying: "Set the updateSort property on the component equal to the action named 'sortByFirstName'". In effect, we are just passing the function in controller to the component to be used.

In the component's template file where we have `<button {{action 'sendUpdate'}}>Sort By First Name</button>`. We are giving our button the local action named `sendUpdate`. In our component's template, we are defining this action:

    actions: {
      sendUpdate(){
        this.get('updateSort')();
      }
    }

When this action is triggered by the button click, it calls the `updateSort` function that we passed in from the controller.
